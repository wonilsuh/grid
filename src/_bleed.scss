/* Bleed */

.ibm-col-bleed {
  max-width: map-get(map-get($ibm-grid, $breakpoint-max), 'breakpoint');
  width: 100vw; 
}

@each $breakpoint, $values in $ibm-grid {
  
  @if map-get($values, 'margin') > 0 {

    @media (min-width:#{map-get($values, 'breakpoint')}) {

      $padding: map-get($values, 'padding');
      .ibm-col-bleed {
        margin: 0 #{get-padding($values, -1 * map-get($values, 'margin'))};
        padding-left: calc( #{get-padding($values, 1)} * #{map-get($values, 'margin') * 2});
        padding-right: calc( #{get-padding($values, 1)} * #{map-get($values, 'margin') * 2});

        &.ibm-col-group{
          padding-left: calc( #{get-padding($values, 1)} );
          padding-right: calc( #{get-padding($values, 1)} );
        }

        & > .ibm-col-group,
        & > .ibm-col-padding-horizontal {
          padding-left: calc( #{get-padding($values, 1)} * 2);
          padding-right: calc( #{get-padding($values, 1)} * 2);
        }
      }

      .ibm-col-bleed-left{
        margin-left: #{get-padding($values, -1)};
        padding-left: calc( #{get-padding($values, 1)} * 2);

        &.ibm-col-group{
          padding-left: calc( #{get-padding($values, 1)});
        }
      }

      .ibm-col-bleed-right{
        margin-right: #{get-padding($values, -1)};
        padding-right: calc( #{get-padding($values, 1)} * 2);

        &.ibm-col-group{
          padding-right: calc( #{get-padding($values, 1)});
        }
      }

      $values-max: map-get($ibm-grid, $breakpoint-max);
      @each $breakpoint2, $values2 in $ibm-grid {

        @if $breakpoint2 != $breakpoint-max {

          $a:1;
          @while $a < map-get($values2, 'columns'){

            .ibm-col-#{$breakpoint2}-#{$a}.ibm-col-bleed {
              max-width: #{map-get($values-max, 'breakpoint') / map-get($values, 'columns') * $a };
              width: calc( 100vw / #{map-get($values, 'columns')} * #{$a} );
            }

            .ibm-col-#{$breakpoint2}-#{$a}[class*="ibm-col-bleed-"] {
              max-width: #{(map-get($values-max, 'breakpoint') - map-get($values-max, 'padding') * 2) * $a / map-get($values2, 'columns') + $padding};
              width: calc( (100vw - #{$padding} * 2) * #{$a / map-get($values2, 'columns')} + #{$padding});
            }
            $a: $a + 1;
          }
        } @else {

        }
      }
    }
  }
}